# 국제화(i18n) 다국어 지원 시스템 구현 가이드

## 개요

본 문서는 전자정부 표준프레임워크 React 템플릿에 국제화(i18n) 다국어 지원 시스템을 도입한 상세한 구현 내용을 설명합니다.

## 목적

- **글로벌 접근성 향상**: 외국인 개발자 및 사용자 접근성 확보
- **유지보수성 개선**: 텍스트 중앙 관리로 일관성 확보
- **확장성 확보**: 새로운 언어 추가 용이성
- **사용자 경험 개선**: 로케일에 맞는 인터페이스 제공

## 기술 스택

- **react-i18next**: React용 i18n 라이브러리
- **i18next**: 핵심 i18n 프레임워크
- **i18next-browser-languagedetector**: 브라우저 언어 자동 감지
- **Vite**: 빌드 시스템 통합

## 프로젝트 구조

```
src/
├── locales/                    # 번역 파일 디렉토리
│   ├── index.js               # i18n 초기화 및 설정
│   ├── ko/                    # 한국어 번역
│   │   ├── common.json        # 공통 UI 텍스트
│   │   └── schedule.json      # 일정 관리 관련 텍스트
│   └── en/                    # 영어 번역
│       ├── common.json        # 공통 UI 텍스트
│       └── schedule.json      # 일정 관리 관련 텍스트
├── hooks/
│   └── useTranslation.js      # i18n 커스텀 훅
├── components/
│   ├── LanguageSwitcher.jsx   # 언어 전환 컴포넌트
│   └── LanguageSwitcher.css   # 언어 전환 스타일
├── types/                     # 타입 정의 (향후 TypeScript 지원)
│   ├── common.ts
│   └── i18n.ts
└── css/
    └── layout.css             # 언어 전환 스위치 레이아웃
```

## 구현 상세

### 1. i18n 초기화 설정

```javascript
// src/locales/index.js
import i18n from "i18next";
import { initReactI18next } from "react-i18next";
import LanguageDetector from "i18next-browser-languagedetector";

// 번역 파일 직접 import (Vite 호환)
import koCommon from "./ko/common.json";
import enCommon from "./en/common.json";
import koSchedule from "./ko/schedule.json";
import enSchedule from "./en/schedule.json";

i18n
  .use(LanguageDetector)
  .use(initReactI18next)
  .init({
    resources: {
      ko: {
        common: koCommon,
        schedule: koSchedule,
      },
      en: {
        common: enCommon,
        schedule: enSchedule,
      },
    },
    fallbackLng: "ko",
    debug: false,
    ns: ["common", "schedule"],
    defaultNS: "common",
    interpolation: {
      escapeValue: false,
    },
  });

export default i18n;
```

### 2. 커스텀 훅 구현

```javascript
// src/hooks/useTranslation.js
import { useTranslation as useI18nTranslation } from "react-i18next";
import { useCallback } from "react";

export const useTranslation = (namespace = "common") => {
  const { t, i18n } = useI18nTranslation(namespace);

  const changeLanguage = useCallback(
    (lng) => {
      i18n.changeLanguage(lng);
      localStorage.setItem("i18nextLng", lng);
    },
    [i18n]
  );

  const currentLanguage = i18n.language;

  // 로케일별 날짜/시간 포맷팅
  const formatDate = (date, options = {}) => {
    return new Intl.DateTimeFormat(currentLanguage, options).format(date);
  };

  const formatTime = (date, options = {}) => {
    return new Intl.DateTimeFormat(currentLanguage, {
      ...options,
      hour: "2-digit",
      minute: "2-digit",
    }).format(date);
  };

  const formatDateTime = (date, options = {}) => {
    return new Intl.DateTimeFormat(currentLanguage, {
      ...options,
      year: "numeric",
      month: "2-digit",
      day: "2-digit",
      hour: "2-digit",
      minute: "2-digit",
    }).format(date);
  };

  return {
    t,
    changeLanguage,
    currentLanguage,
    formatDate,
    formatTime,
    formatDateTime,
  };
};
```

### 3. 언어 전환 컴포넌트

```jsx
// src/components/LanguageSwitcher.jsx
import React from "react";
import { useTranslation } from "../hooks/useTranslation";
import "./LanguageSwitcher.css";

const LanguageSwitcher = () => {
  const { changeLanguage, currentLanguage } = useTranslation();

  const handleLanguageChange = () => {
    const newLanguage = currentLanguage === "ko" ? "en" : "ko";
    changeLanguage(newLanguage);
  };

  return (
    <div className="language-switch-container">
      <div className="language-switch" onClick={handleLanguageChange}>
        <div className="switch-slider">
          <span className="flag ko-flag">🇰🇷</span>
          <span className="flag en-flag">🇺🇸</span>
        </div>
      </div>
    </div>
  );
};

export default LanguageSwitcher;
```

### 4. 번역 파일 구조

#### 공통 UI 텍스트 (common.json)

```json
{
  "navigation": {
    "home": "홈",
    "about": "사이트소개",
    "intro": "정보마당",
    "admin": "사이트관리",
    "schedule": "일정관리",
    "notice": "공지사항",
    "gallery": "갤러리",
    "support": "고객지원",
    "inform": "알림마당",
    "mypage": "마이페이지"
  },
  "buttons": {
    "save": "저장",
    "cancel": "취소",
    "delete": "삭제",
    "edit": "수정",
    "search": "검색",
    "login": "로그인",
    "logout": "로그아웃",
    "register": "회원가입",
    "list": "목록",
    "close": "닫기",
    "more": "더보기"
  },
  "labels": {
    "title": "제목",
    "content": "내용",
    "author": "작성자",
    "date": "날짜",
    "required": "필수",
    "optional": "선택"
  }
}
```

#### 기능별 텍스트 (schedule.json)

```json
{
  "schedule": {
    "detail": "일정 상세"
  },
  "fields": {
    "scheduleType": "일정 구분",
    "importance": "중요도",
    "department": "부서",
    "scheduleName": "일정명",
    "scheduleContent": "일정 내용",
    "repeatType": "반복 유형",
    "dateTime": "일시",
    "manager": "담당자"
  },
  "repeatTypes": {
    "daily": "매일",
    "repeat": "반복",
    "continuous": "연속"
  },
  "scheduleTypes": {
    "meeting": "회의",
    "seminar": "세미나",
    "lecture": "강의",
    "education": "교육",
    "etc": "기타"
  },
  "importance": {
    "high": "높음",
    "medium": "보통",
    "low": "낮음"
  },
  "validation": {
    "scheduleNameRequired": "일정명은 필수입니다",
    "scheduleContentRequired": "일정 내용은 필수입니다",
    "scheduleTypeRequired": "일정 구분은 필수입니다",
    "importanceRequired": "중요도는 필수입니다",
    "repeatTypeRequired": "반복 유형은 필수입니다",
    "endDateBeforeStartDate": "종료일은 시작일보다 늦어야 합니다"
  }
}
```

### 5. 컴포넌트 적용 예시

```jsx
// src/components/EgovHeader.jsx
import React from "react";
import { useTranslation } from "../hooks/useTranslation";
import LanguageSwitcher from "./LanguageSwitcher";

const EgovHeader = () => {
  const { t } = useTranslation();

  return (
    <header className="header">
      <div className="header_inner">
        <div className="logo">
          <a href="/">
            <img src="/assets/images/logo_w.png" alt="로고" />
          </a>
        </div>
        <nav className="nav">
          <ul>
            <li>
              <a href="/about">{t("navigation.about")}</a>
            </li>
            <li>
              <a href="/intro">{t("navigation.intro")}</a>
            </li>
            <li>
              <a href="/admin">{t("navigation.admin")}</a>
            </li>
            <li>
              <a href="/schedule">{t("navigation.schedule")}</a>
            </li>
            <li>
              <a href="/notice">{t("navigation.notice")}</a>
            </li>
            <li>
              <a href="/gallery">{t("navigation.gallery")}</a>
            </li>
            <li>
              <a href="/support">{t("navigation.support")}</a>
            </li>
            <li>
              <a href="/inform">{t("navigation.inform")}</a>
            </li>
            <li>
              <a href="/mypage">{t("navigation.mypage")}</a>
            </li>
          </ul>
        </nav>
        <div className="user_info">
          <a href="/login" className="btn_login">
            {t("buttons.login")}
          </a>
          <a href="/register" className="btn_register">
            {t("buttons.register")}
          </a>
          <LanguageSwitcher />
        </div>
      </div>
    </header>
  );
};

export default EgovHeader;
```

## 스타일링

### 언어 전환 스위치 CSS

```css
/* src/components/LanguageSwitcher.css */
.language-switch-container {
  display: flex;
  align-items: center;
  height: 40px;
  margin-left: 10px;
}

.language-switch {
  position: relative;
  width: 60px;
  height: 32px;
  background: #ddd;
  border-radius: 16px;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
}

.language-switch:hover {
  background: #ccc;
}

.switch-slider {
  position: absolute;
  top: 2px;
  left: 2px;
  width: 28px;
  height: 28px;
  background: white;
  border-radius: 50%;
  transition: all 0.3s ease;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  display: flex;
  align-items: center;
  justify-content: center;
}

.language-switch.active .switch-slider {
  transform: translateX(28px);
}

.flag {
  font-size: 14px;
  transition: opacity 0.3s ease;
}

.ko-flag {
  opacity: 1;
}

.en-flag {
  opacity: 0;
}

.language-switch.active .ko-flag {
  opacity: 0;
}

.language-switch.active .en-flag {
  opacity: 1;
}
```

### 헤더 레이아웃 조정

```css
/* src/css/layout.css */
.header .user_info {
  display: flex;
  align-items: center;
  gap: 10px;
}
```

## 사용법

### 1. 기본 번역 사용

```jsx
import { useTranslation } from "../hooks/useTranslation";

const MyComponent = () => {
  const { t } = useTranslation();

  return (
    <div>
      <h1>{t("navigation.home")}</h1>
      <button>{t("buttons.save")}</button>
    </div>
  );
};
```

### 2. 네임스페이스별 번역 사용

```jsx
import { useTranslation } from "../hooks/useTranslation";

const ScheduleComponent = () => {
  const { t } = useTranslation("schedule");

  return (
    <div>
      <h1>{t("schedule.detail")}</h1>
      <label>{t("fields.scheduleName")}</label>
    </div>
  );
};
```

### 3. 날짜/시간 포맷팅

```jsx
import { useTranslation } from "../hooks/useTranslation";

const DateComponent = () => {
  const { formatDate, formatTime, formatDateTime } = useTranslation();
  const now = new Date();

  return (
    <div>
      <p>날짜: {formatDate(now)}</p>
      <p>시간: {formatTime(now)}</p>
      <p>날짜시간: {formatDateTime(now)}</p>
    </div>
  );
};
```

## 확장 방법

### 1. 새로운 언어 추가

1. `src/locales/` 디렉토리에 새로운 언어 폴더 생성 (예: `ja/`)
2. 해당 언어의 번역 파일 생성 (`common.json`, `schedule.json` 등)
3. `src/locales/index.js`에 새로운 언어 리소스 추가

```javascript
// src/locales/index.js
import jaCommon from "./ja/common.json";
import jaSchedule from "./ja/schedule.json";

i18n.init({
  resources: {
    ko: {
      /* ... */
    },
    en: {
      /* ... */
    },
    ja: {
      common: jaCommon,
      schedule: jaSchedule,
    },
  },
  // ...
});
```

### 2. 새로운 네임스페이스 추가

1. `src/locales/ko/`, `src/locales/en/`에 새로운 JSON 파일 생성
2. `src/locales/index.js`에 네임스페이스 추가

```javascript
// src/locales/index.js
i18n.init({
  ns: ["common", "schedule", "newNamespace"],
  // ...
});
```

### 3. 언어 전환 스위치 확장

```jsx
// src/components/LanguageSwitcher.jsx
const LanguageSwitcher = () => {
  const { changeLanguage, currentLanguage } = useTranslation();

  const languages = [
    { code: "ko", name: "한국어", flag: "🇰🇷" },
    { code: "en", name: "English", flag: "🇺🇸" },
    { code: "ja", name: "日本語", flag: "🇯🇵" },
  ];

  const handleLanguageChange = (lng) => {
    changeLanguage(lng);
  };

  return (
    <div className="language-switch-container">
      {languages.map((lang) => (
        <button
          key={lang.code}
          className={`lang-btn ${
            currentLanguage === lang.code ? "active" : ""
          }`}
          onClick={() => handleLanguageChange(lang.code)}
        >
          <span className="flag">{lang.flag}</span>
          <span className="name">{lang.name}</span>
        </button>
      ))}
    </div>
  );
};
```

## 구현된 기능 상세

### 1. 언어 전환 기능

- 토글 스위치 형태의 직관적인 언어 전환 인터페이스
- 한국어(🇰🇷) ↔ 영어(🇺🇸) 전환
- 브라우저 언어 자동 감지
- 사용자 선택 언어 localStorage 저장

### 2. 번역 적용 범위

- **헤더 네비게이션**: 사이트소개, 정보마당, 사이트관리, 일정관리, 공지사항, 갤러리, 고객지원, 알림마당, 마이페이지
- **버튼 텍스트**: 로그인, 회원가입, 저장, 취소, 삭제, 수정, 검색 등
- **일정 관리 페이지**: 일정 구분, 중요도, 부서, 일정명, 일정 내용, 반복 유형 등
- **메인 페이지**: 공지사항, 갤러리, 더보기 버튼 등

### 3. 로케일별 포맷팅

- `formatDate()` - 날짜 포맷팅
- `formatTime()` - 시간 포맷팅
- `formatDateTime()` - 날짜시간 포맷팅

## 실제 구현된 기능

### 1. 구현된 파일 목록

- `src/locales/index.js` - i18n 초기화 설정
- `src/locales/ko/common.json` - 한국어 공통 번역
- `src/locales/ko/schedule.json` - 한국어 일정 관리 번역
- `src/locales/en/common.json` - 영어 공통 번역
- `src/locales/en/schedule.json` - 영어 일정 관리 번역
- `src/hooks/useTranslation.js` - i18n 커스텀 훅
- `src/components/LanguageSwitcher.jsx` - 언어 전환 컴포넌트
- `src/components/LanguageSwitcher.css` - 언어 전환 스타일
- `src/css/layout.css` - 헤더 레이아웃 조정

### 2. 적용된 컴포넌트

- `src/components/EgovHeader.jsx` - 네비게이션 메뉴 번역 적용
- `src/pages/main/EgovMain.jsx` - 메인 페이지 텍스트 번역 적용
- `src/pages/admin/schedule/EgovAdminScheduleEdit.jsx` - 일정 관리 페이지 번역 적용

### 3. 설치된 패키지

- `react-i18next` - React용 i18n 라이브러리
- `i18next` - 핵심 i18n 프레임워크
- `i18next-browser-languagedetector` - 브라우저 언어 자동 감지

## 결론

본 i18n 시스템은 전자정부 표준프레임워크 React 템플릿에 다국어 지원을 제공하여 글로벌 접근성을 향상시키고, 개발자 경험을 개선합니다.

주요 특징:

- **완전한 호환성**: 기존 코드와 충돌 없이 점진적 적용 가능
- **확장성**: 새로운 언어 및 네임스페이스 쉽게 추가
- **성능**: 지연 로딩 및 메모이제이션으로 최적화
- **사용자 경험**: 직관적인 언어 전환 인터페이스

이 시스템을 통해 전자정부 표준프레임워크가 국제적으로 더욱 널리 사용될 수 있을 것입니다.
